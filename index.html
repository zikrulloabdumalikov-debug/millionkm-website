<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Million KM | Premium Avto Servis</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
       
        :root {
            --primary: #007aff; /* Apple blue */
            --bg: #f5f5f7; /* Light gray background */
            --card: #ffffff;
            --text: #1d1d1f; /* Dark text */
            --gray: #6e6e73; /* Lighter gray */
            --green: #34c759;
            --radius: 18px;
            --transition: all 0.3s ease;
        }
       
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
       
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
       
        .animate {
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
        }
       
        .animate-delay-1 { animation-delay: 0.2s; }
        .animate-delay-2 { animation-delay: 0.4s; }
        .animate-delay-3 { animation-delay: 0.6s; }
       
        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            transition: var(--transition);
        }
       
        nav:hover {
            background: rgba(255, 255, 255, 0.9);
        }
       
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
       
        .logo {
            font-size: 20px;
            font-weight: 600;
            color: var(--text);
            transition: var(--transition);
        }
       
        .logo:hover {
            color: var(--primary);
        }
       
        .nav-links a {
            margin-left: 30px;
            color: var(--gray);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }
       
        .nav-links a:hover {
            color: var(--primary);
            transform: translateY(-2px);
        }
       
        /* Hero Section */
        .hero {
            padding: 140px 20px 100px;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }
       
        .hero h1 {
            font-size: 56px;
            font-weight: 600;
            letter-spacing: -0.5px;
            margin-bottom: 20px;
        }
       
        .hero p {
            font-size: 24px;
            color: var(--gray);
            margin-bottom: 40px;
        }
       
        /* Buttons */
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: var(--primary);
            color: white;
            border-radius: 980px;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 15px;
        }
       
        .btn:hover {
            background: #0071e3;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }
       
        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
       
        .btn-secondary:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }
       
        /* Brand Cards */
        .brands-section {
            padding: 80px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
       
        .section-title {
            font-size: 44px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 60px;
            color: var(--text);
        }
       
        .brands-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
       
        .brand-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            transition: var(--transition);
            cursor: pointer;
        }
       
        .brand-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
       
        .brand-logo {
            font-size: 48px;
            margin-bottom: 20px;
            transition: var(--transition);
        }
       
        .brand-card:hover .brand-logo {
            transform: scale(1.1);
        }
       
        .brand-card h3 {
            font-size: 28px;
            margin-bottom: 10px;
        }
       
        .brand-card p {
            color: var(--gray);
            margin-bottom: 25px;
        }
       
        /* Services */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
       
        .service-card {
            background: white;
            color: var(--text);
            padding: 35px 25px;
            border-radius: var(--radius);
            transition: var(--transition);
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }
       
        .service-card:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
       
        .service-card h3 {
            font-size: 22px;
            margin-bottom: 10px;
        }
       
        /* Benefits Section */
        .benefits {
            background: white;
            padding: 100px 20px;
            margin: 80px 0;
        }
       
        .benefits-container {
            max-width: 1100px;
            margin: 0 auto;
        }
       
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }
       
        .benefit-item {
            padding: 25px;
            border-left: 3px solid var(--primary);
            transition: var(--transition);
        }
       
        .benefit-item:hover {
            transform: translateX(5px);
        }
       
        .benefit-item h4 {
            font-size: 18px;
            margin-bottom: 10px;
        }
       
        .benefit-item p {
            color: var(--gray);
            font-size: 14px;
        }
       
        /* Car Models Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            overflow-y: auto;
            transition: opacity 0.3s ease;
        }
       
        .modal-content {
            background: white;
            max-width: 900px;
            margin: 80px auto;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
       
        .modal.show .modal-content {
            transform: scale(1);
        }
       
        .close-modal {
            float: right;
            font-size: 30px;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
        }
       
        .close-modal:hover {
            color: var(--text);
            transform: rotate(90deg);
        }
       
        .car-models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
       
        .car-model {
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }
       
        .car-model:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
       
        .car-model h4 {
            margin-bottom: 10px;
        }
       
        .car-model ul {
            list-style: none;
            color: var(--gray);
            font-size: 13px;
            text-align: left;
        }
       
        .car-model ul li {
            margin: 5px 0;
            transition: var(--transition);
        }
       
        .car-model ul li:hover {
            color: var(--text);
        }
       
        /* Status Checker */
        .status-checker {
            background: #f5f5f7;
            padding: 80px 20px;
            color: var(--text);
            text-align: center;
        }
       
        .checker-form {
            max-width: 500px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }
       
        .checker-form select,
        .checker-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 10px;
            font-size: 15px;
            transition: var(--transition);
        }
       
        .checker-form select:focus,
        .checker-form input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
       
        .status-result {
            margin-top: 20px;
            padding: 20px;
            background: #f5f5f7;
            border-radius: 10px;
            display: none;
            transition: var(--transition);
        }
       
        /* Map Section */
        .map-section {
            padding: 100px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
       
        .map-container {
            width: 100%;
            height: 500px;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
       
        .map-container:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
       
        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1500;
        }
       
        .chat-button {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.2);
            transition: var(--transition);
        }
       
        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
        }
       
        .chat-box {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            flex-direction: column;
            overflow: hidden;
            transition: var(--transition);
        }
       
        .chat-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            font-weight: 600;
        }
       
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
       
        .chat-input {
            padding: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
       
        .chat-input input {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 20px;
            outline: none;
            transition: var(--transition);
        }
       
        .chat-input input:focus {
            border-color: var(--primary);
        }
       
        /* Auth Modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease;
        }
       
        .auth-box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
       
        .auth-modal.show .auth-box {
            transform: scale(1);
        }
       
        .auth-box h2 {
            margin-bottom: 20px;
        }
       
        .auth-box input,
        .auth-box select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 10px;
            font-size: 15px;
            transition: var(--transition);
        }
       
        .auth-box input:focus,
        .auth-box select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
       
        /* Cabinet Section */
        #cabinet {
            display: none;
            padding: 100px 20px;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
       
        .cabinet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
       
        .cabinet-card {
            background: var(--bg);
            padding: 30px;
            border-radius: var(--radius);
            transition: var(--transition);
        }
       
        .cabinet-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
       
        .cabinet-card h4 {
            margin-bottom: 15px;
            font-size: 20px;
        }
       
        .cabinet-card p {
            color: var(--gray);
            font-size: 14px;
            margin: 5px 0;
        }
       
        /* Add Car Form */
        .add-car-form {
            max-width: 500px;
            margin: 40px auto;
            background: white;
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }
       
        .add-car-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 10px;
            font-size: 15px;
            transition: var(--transition);
        }
       
        .add-car-form input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
       
        /* Footer */
        footer {
            background: white;
            padding: 80px 20px;
            text-align: center;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
       
        .social-links {
            margin: 20px 0;
        }
       
        .social-links a {
            margin: 0 15px;
            color: var(--gray);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }
       
        .social-links a:hover {
            color: var(--primary);
            transform: translateY(-2px);
        }
       
        @media (max-width: 768px) {
            .hero h1 { font-size: 40px; }
            .nav-links { display: none; }
            .brands-grid { grid-template-columns: 1fr; }
            .services-grid { grid-template-columns: 1fr; }
            .benefits-grid { grid-template-columns: 1fr; }
            .cabinet-grid { grid-template-columns: 1fr; }
        }

        .hidden { display: none; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="animate">
        <div class="nav-container">
            <div class="logo">Million km</div>
            <div class="nav-links">
                <a href="#brands">Brendlar</a>
                <a href="#services">Xizmatlar</a>
                <a href="#benefits">Afzalliklar</a>
                <a href="#filiallar">Filiallar</a>
                <a href="#" id="authLink" onclick="openAuth()">Kirish</a>
                <a href="#" id="cabinetLink" class="hidden" onclick="openCabinet()">Kabinet</a>
            </div>
        </div>
    </nav>
    <!-- Hero Section -->
    <div class="hero">
        <h1 class="animate animate-delay-1">Million km standartiga xush kelibsiz</h1>
        <p class="animate animate-delay-2">Dvigatel yog' yeyish muammosiga xayr ayting. Uzoq xizmat muddati. Aniq nazorat.</p>
        <button class="btn animate animate-delay-3" onclick="openAuth()">Hozir boshlash</button>
        <button class="btn btn-secondary animate animate-delay-3" style="margin-left: 10px;" onclick="scrollToSection('#status')">Statusni tekshirish</button>
    </div>
    <!-- Brands Section -->
    <div id="brands" class="brands-section">
        <h2 class="section-title animate">Qo'llab-quvvatlanadigan brendlar</h2>
        <div class="brands-grid">
            <div class="brand-card animate animate-delay-1" onclick="openBrandModal('chevrolet')">
                <div class="brand-logo">üöó</div>
                <h3>Chevrolet</h3>
                <p>Million km standartlariga mos eng so'nggi Chevrolet modellari</p>
                <button class="btn">Modellarni tanlash</button>
            </div>
           
            <div class="brand-card animate animate-delay-2" onclick="openBrandModal('kia')">
                <div class="brand-logo">üöô</div>
                <h3>Kia</h3>
                <p>Million km standartlariga mos eng so'nggi Kia modellari</p>
                <button class="btn">Modellarni tanlash</button>
            </div>
           
            <div class="brand-card animate animate-delay-3" onclick="openBrandModal('liauto')">
                <div class="brand-logo">‚ö°</div>
                <h3>Li Auto</h3>
                <p>Million km standartlariga mos eng so'nggi Li Auto modellari</p>
                <button class="btn">Modellarni tanlash</button>
            </div>
        </div>
    </div>
    <!-- Services Section -->
    <div id="services" class="brands-section">
        <h2 class="section-title animate">Maxsus xizmatlar</h2>
        <div class="services-grid">
            <div class="service-card animate animate-delay-1">
                <h3>üöÄ Million km Express</h3>
                <p>Million km standardi asosida, manzilga borib xizmat ko'rsatish</p>
                <button class="btn" style="background: var(--primary); color: white; margin-top: 15px;">Xizmatni tanlash</button>
            </div>
           
            <div class="service-card animate animate-delay-2">
                <h3>‚õΩ Million km Fuel</h3>
                <p>Million km talablariga mos, sifatli yoqilg'i yetkazib berish</p>
                <button class="btn" style="background: var(--primary); color: white; margin-top: 15px;">Xarid qilish</button>
            </div>
        </div>
    </div>
    <!-- Benefits Section -->
    <div id="benefits" class="benefits">
        <div class="benefits-container">
            <h2 class="section-title animate">Nega Million km?</h2>
            <p class="animate animate-delay-1" style="text-align: center; color: var(--gray); max-width: 700px; margin: 0 auto;">
                Biz shunchaki avtomobilga xizmat ko'rsatmaymiz ‚Äî sizga ishonch, kafolat va qulaylik hadya qilamiz
            </p>
           
            <div class="benefits-grid">
                <div class="benefit-item animate animate-delay-1">
                    <h4>1Ô∏è‚É£ Million km gacha kafolat</h4>
                    <p>Avtomobilingizga million kmgacha texnik kafolat beramiz</p>
                </div>
               
                <div class="benefit-item animate animate-delay-2">
                    <h4>2Ô∏è‚É£ Bepul avtomoyka</h4>
                    <p>Har safar moy almashtirishda bepul avtomoyka xizmati</p>
                </div>
               
                <div class="benefit-item animate animate-delay-3">
                    <h4>3Ô∏è‚É£ Original mahsulotlar</h4>
                    <p>Faqat sertifikatlangan va original mahsulotlar</p>
                </div>
               
                <div class="benefit-item animate animate-delay-1">
                    <h4>4Ô∏è‚É£ Bitta joyda barcha xizmat</h4>
                    <p>Diagnostika, ta'mirlash, xizmat ‚Äî hammasi bizda</p>
                </div>
               
                <div class="benefit-item animate animate-delay-2">
                    <h4>5Ô∏è‚É£ Tezkor servis tarmog'i</h4>
                    <p>O'zbekiston bo'ylab eng tez va sifatli xizmat</p>
                </div>
               
                <div class="benefit-item animate animate-delay-3">
                    <h4>6Ô∏è‚É£ Tajribali ustalar</h4>
                    <p>O'z ishining professionallariga ishoning</p>
                </div>
               
                <div class="benefit-item animate animate-delay-1">
                    <h4>7Ô∏è‚É£ Yillik diagnostika</h4>
                    <p>Har yili bepul to'liq diagnostika xizmati</p>
                </div>
               
                <div class="benefit-item animate animate-delay-2">
                    <h4>8Ô∏è‚É£ Express xizmatlar</h4>
                    <p>Vaqtingizni tejang - tez va professional</p>
                </div>
               
                <div class="benefit-item animate animate-delay-3">
                    <h4>9Ô∏è‚É£ Online monitoring</h4>
                    <p>Avtomobil holatini shaxsiy tizim orqali kuzating</p>
                </div>
               
                <div class="benefit-item animate animate-delay-1">
                    <h4>üîü Masofaviy diagnostika</h4>
                    <p>Telefon orqali ham yordam beramiz</p>
                </div>
               
                <div class="benefit-item animate animate-delay-2">
                    <h4>1Ô∏è‚É£1Ô∏è‚É£ Sovg'a futbolka</h4>
                    <p>Har yangi mijozga original Million km futbolkasi</p>
                </div>
               
                <div class="benefit-item animate animate-delay-3">
                    <h4>1Ô∏è‚É£2Ô∏è‚É£ Bonuslar tizimi</h4>
                    <p>Doimiy mijozlarga chegirmalar va bonuslar</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Status Checker -->
    <div id="status" class="status-checker">
        <h2 class="animate" style="font-size: 40px; margin-bottom: 10px;">Mashinangiz statusini tekshiring</h2>
        <p class="animate animate-delay-1" style="font-size: 18px; opacity: 0.9;">Million km xizmatiga mos ekanligini aniqlang</p>
       
        <div class="checker-form animate animate-delay-2">
            <select id="brandSelect">
                <option value="">Brend tanlang</option>
                <option value="chevrolet">Chevrolet</option>
                <option value="kia">Kia</option>
            </select>
           
            <select id="modelSelect">
                <option value="">Avval brend tanlang</option>
            </select>
           
            <input type="number" id="carYear" placeholder="Mashina yili (masalan: 2022)">
            <input type="number" id="carKm" placeholder="Yurgan masofa (km)">
           
            <button class="btn" onclick="checkStatus()" style="width: 100%; margin-top: 10px; background: var(--primary); color: white;">
                Tekshirish
            </button>
           
            <div id="statusResult" class="status-result"></div>
        </div>
    </div>
    <!-- Map Section -->
    <div id="filiallar" class="map-section">
        <h2 class="section-title animate">Million km filiallari</h2>
        <p class="animate animate-delay-1" style="text-align: center; color: var(--gray); margin-bottom: 30px;">
            O'zbekiston bo'ylab eng yaqin filialni toping
        </p>
        <div class="map-container animate animate-delay-2">
            <iframe
                src="https://yandex.uz/map-widget/v1/?ll=70.893061%2C40.546387&z=12"
                width="100%"
                height="100%"
                frameborder="0">
            </iframe>
        </div>
    </div>
    <!-- Cabinet Section -->
    <section id="cabinet" class="hidden">
        <h2 class="section-title animate">Mening Kabinetim</h2>
        <p class="animate animate-delay-1" id="welcomeText" style="text-align: center; color: var(--gray); margin-bottom: 40px;"></p>
       
        <div class="add-car-form animate animate-delay-2">
            <h3>Mashina qo‚Äòshish</h3>
            <input id="carModel" placeholder="Mashina modeli">
            <input id="carYear" type="number" placeholder="Mashina yili">
            <input id="lastOilKm" type="number" placeholder="Oxirgi moy almashtirilgan probeg">
            <input id="dailyKm" type="number" placeholder="Kunlik o‚Äòrtacha yurish (km)">
            <button class="btn" style="width:100%; margin-top:15px;" id="addCarBtn">Mashina qo‚Äòshish</button>
        </div>
       
        <div id="garage" class="cabinet-grid"></div>
    </section>
    <!-- Footer -->
    <footer class="animate">
        <h3>Million km</h3>
        <p style="color: var(--gray); margin: 10px 0;">Dvigatel uchun yangi avlod ishonchi</p>
       
        <div class="social-links">
            <a href="#">Instagram</a>
            <a href="#">Telegram</a>
            <a href="#">YouTube</a>
        </div>
       
        <p style="color: var(--gray); font-size: 14px; margin-top: 20px;">
            üìû Call centr: +998 71 123 45 67
        </p>
    </footer>
    <!-- Chat Widget -->
    <div class="chat-widget">
        <div class="chat-box" id="chatBox">
            <div class="chat-header">
                Million km Support
                <span style="float: right; cursor: pointer;" onclick="toggleChat()">‚úï</span>
            </div>
            <div class="chat-messages" id="chatMessages">
                <p class="bot-message">Salom! Sizga qanday yordam bera olaman?</p>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Xabar yozing..." onkeypress="if(event.key==='Enter') sendMessage()">
            </div>
        </div>
        <div class="chat-button" onclick="toggleChat()">
            üí¨
        </div>
    </div>
    <!-- Modals -->
    <div id="brandModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Modellar</h2>
            <div id="carModelsContainer" class="car-models-grid"></div>
        </div>
    </div>
    <div id="authModal" class="auth-modal">
        <div class="auth-box">
            <span class="close-modal" onclick="closeAuth()">&times;</span>
            <h2>Ro'yxatdan o'tish</h2>
            <input type="text" placeholder="Ismingiz" id="userName">
            <input type="email" placeholder="Email" id="userEmail">
            <input type="tel" placeholder="Telefon raqami" id="userPhone">
            <select id="userGender">
                <option value="">Jinsni tanlang</option>
                <option value="male">Erkak</option>
                <option value="female">Ayol</option>
            </select>
            <button class="btn" onclick="register()" style="width: 100%; margin-top: 15px;">
                Ro'yxatdan o'tish
            </button>
        </div>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, where, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
       
        const firebaseConfig = {
            apiKey: "AIzaSyA0zyqs1BrDKKS7kkq3nqmJSj_VpM6CVcM", // Sample config, replace if needed
            authDomain: "millionkm-a42ee.firebaseapp.com",
            projectId: "millionkm-a42ee",
            storageBucket: "millionkm-a42ee.firebasestorage.app",
            messagingSenderId: "594685468082",
            appId: "1:594685468082:web:e44c081e0617f0016998ab"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
       
        const TG_TOKEN = "7722483735:AAG_LZ1Bg0H-mnqAlnw4OknNj-BTrqM8CWM";
        const TG_CHAT_ID = "-1003461463026";
       
        const carData = {
            chevrolet: {
                'Nexia 3': { maxAge: 5, maxKm: 100000 },
                'Cobalt': { maxAge: 5, maxKm: 100000 },
                'Gentra': { maxAge: 5, maxKm: 100000 },
                'Onix': { maxAge: 3, maxKm: 50000 },
                'Tracker': { maxAge: 3, maxKm: 50000 },
                'Malibu': { maxAge: 5, maxKm: 50000 },
                'Equinox': { maxAge: 3, maxKm: 50000 },
                'Traverse': { maxAge: 3, maxKm: 50000 },
                'Tahoe': { maxAge: 3, maxKm: 50000 }
            },
            kia: {
                'Sonet': { maxAge: 3, maxKm: 50000 },
                'K5': { maxAge: 3, maxKm: 50000 },
                'Sportage': { maxAge: 3, maxKm: 50000 }
            },
            liauto: {
                'Li L9': { maxAge: 3, maxKm: 50000 },
                'Li L7': { maxAge: 3, maxKm: 50000 },
                'Li One': { maxAge: 3, maxKm: 50000 }
            }
        };
       
        // Telegram message sender
        async function sendTelegramMessage(message) {
            const url = `https://api.telegram.org/bot${TG_TOKEN}/sendMessage`;
            try {
                await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TG_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
            } catch (error) {
                console.error('Telegram xabar yuborishda xato:', error);
            }
        }
       
        // Brand select change event
        document.getElementById('brandSelect').addEventListener('change', function() {
            const brand = this.value;
            const modelSelect = document.getElementById('modelSelect');
            modelSelect.innerHTML = '<option value="">Model tanlang</option>';
           
            if (brand && carData[brand]) {
                Object.keys(carData[brand]).forEach(model => {
                    const option = document.createElement('option');
                    option.value = model;
                    option.textContent = model;
                    modelSelect.appendChild(option);
                });
            }
        });
       
        // Check status function
        function checkStatus() {
            const brand = document.getElementById('brandSelect').value;
            const model = document.getElementById('modelSelect').value;
            const year = parseInt(document.getElementById('carYear').value);
            const km = parseInt(document.getElementById('carKm').value);
            const result = document.getElementById('statusResult');
           
            if (!brand || !model || !year || !km) {
                result.style.display = 'block';
                result.innerHTML = '‚ùå Iltimos, barcha maydonlarni to\'ldiring';
                return;
            }
           
            const currentYear = new Date().getFullYear();
            const carAge = currentYear - year;
            const limits = carData[brand][model];
           
            result.style.display = 'block';
           
            if (carAge <= limits.maxAge && km <= limits.maxKm) {
                result.innerHTML = `
                    <h3 style="color: #34c759; margin-bottom: 10px;">‚úÖ Tabriklaymiz!</h3>
                    <p>Mashinangiz Million km garantiyali xizmatga mos keladi!</p>
                    <p style="margin-top: 10px; font-size: 14px;">
                        Yosh: ${carAge} yil (Max: ${limits.maxAge} yil)<br>
                        Probeg: ${km.toLocaleString()} km (Max: ${limits.maxKm.toLocaleString()} km)
                    </p>
                    <button class="btn" onclick="openAuth()" style="margin-top: 15px; background: white; color: #34c759;">
                        Ro'yxatdan o'tish
                    </button>
                `;
            } else {
                result.innerHTML = `
                    <h3 style="color: #f5576c;">‚ö†Ô∏è Afsuski</h3>
                    <p>Mashinangiz garantiyali dasturga mos kelmaydi</p>
                    <p style="margin-top: 10px; font-size: 14px;">
                        Lekin bir martalik xizmatdan foydalanishingiz mumkin!
                    </p>
                    <button class="btn" onclick="openAuth()" style="margin-top: 15px; background: white; color: #f5576c;">
                        Bir martalik xizmat
                    </button>
                `;
            }
        }
       
        // Open brand modal
        function openBrandModal(brand) {
            const modal = document.getElementById('brandModal');
            const container = document.getElementById('carModelsContainer');
            const title = document.getElementById('modalTitle');
           
            title.textContent = brand.charAt(0).toUpperCase() + brand.slice(1) + ' modellari';
            container.innerHTML = '';
           
            if (carData[brand]) {
                Object.entries(carData[brand]).forEach(([model, data]) => {
                    const card = document.createElement('div');
                    card.className = 'car-model';
                    card.innerHTML = `
                        <h4>${model}</h4>
                        <ul>
                            <li>Maksimal yosh: ${data.maxAge} yil</li>
                            <li>Maksimal km: ${data.maxKm} km</li>
                        </ul>
                    `;
                    container.appendChild(card);
                });
            }
           
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }
       
        // Close modal
        function closeModal() {
            const modal = document.getElementById('brandModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }
       
        // Open auth modal
        function openAuth() {
            if (localStorage.getItem('user')) {
                openCabinet();
                return;
            }
            const modal = document.getElementById('authModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('show'), 10);
        }
       
        // Close auth modal
        function closeAuth() {
            const modal = document.getElementById('authModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }
       
        // Register function
        async function register() {
            const name = document.getElementById('userName').value;
            const email = document.getElementById('userEmail').value;
            const phone = document.getElementById('userPhone').value;
            const gender = document.getElementById('userGender').value;
           
            if (!name || !email || !phone || !gender) {
                alert('Barcha maydonlarni to\'ldiring!');
                return;
            }
           
            const user = { name, email, phone, gender };
            localStorage.setItem('user', JSON.stringify(user));
           
            // Save to Firebase
            await addDoc(collection(db, "users"), user);
           
            // Send to Telegram
            await sendTelegramMessage(`Yangi foydalanuvchi: ${name}\nEmail: ${email}\nTelefon: ${phone}\nJins: ${gender}`);
           
            closeAuth();
            alert('Ro\'yxatdan o\'tdingiz! Kabinetga xush kelibsiz.');
            document.getElementById('authLink').textContent = 'Kabinet';
            document.getElementById('authLink').onclick = openCabinet;
            document.getElementById('cabinetLink').classList.remove('hidden');
            openCabinet();
        }
       
        // Open cabinet
        function openCabinet() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user) {
                openAuth();
                return;
            }
           
            document.getElementById('cabinet').style.display = 'block';
            document.getElementById('welcomeText').textContent = `Xush kelibsiz, ${user.name}! Email: ${user.email}, Telefon: ${user.phone}, Jins: ${user.gender}`;
            loadGarage(user.phone);
            scrollToSection('#cabinet');
        }
       
        // Logout function
        function logout() {
            localStorage.removeItem('user');
            alert('Chiqdiz!');
            document.getElementById('authLink').textContent = 'Kirish';
            document.getElementById('authLink').onclick = openAuth;
            document.getElementById('cabinetLink').classList.add('hidden');
            document.getElementById('cabinet').style.display = 'none';
        }
       
        // Check if logged in on load
        window.onload = function() {
            const user = localStorage.getItem('user');
            if (user) {
                document.getElementById('authLink').textContent = 'Kabinet';
                document.getElementById('authLink').onclick = openCabinet;
                document.getElementById('cabinetLink').classList.remove('hidden');
            }
        };
       
        // Add car button
        document.getElementById('addCarBtn').onclick = async () => {
            const user = JSON.parse(localStorage.getItem('user'));
            const model = document.getElementById('carModel').value;
            const year = document.getElementById('carYear').value;
            const lastOil = Number(document.getElementById('lastOilKm').value);
            const daily = Number(document.getElementById('dailyKm').value);
           
            if (model && year && lastOil && daily) {
                const carData = { userPhone: user.phone, userName: user.name, model, year, lastOil, daily, createdAt: new Date() };
                await addDoc(collection(db, "cars"), carData);
               
                // Send to Telegram
                await sendTelegramMessage(`Yangi mashina qo'shildi:\nModel: ${model}\nYil: ${year}\nMijoz: ${user.name}\nTelefon: ${user.phone}`);
               
                document.getElementById('carModel').value = '';
                document.getElementById('carYear').value = '';
                document.getElementById('lastOilKm').value = '';
                document.getElementById('dailyKm').value = '';
            } else {
                alert('Barcha maydonlarni to\'ldiring!');
            }
        };
       
        // Load garage realtime
        function loadGarage(phone) {
            const q = query(collection(db, "cars"), where("userPhone", "==", phone));
            onSnapshot(q, (snapshot) => {
                const garage = document.getElementById('garage');
                garage.innerHTML = '';
                snapshot.forEach((carDoc) => {
                    const car = carDoc.data();
                    const id = carDoc.id;
                    const daysLeft = Math.floor(7000 / car.daily);
                    const statusClass = daysLeft < 10 ? 'status-bad' : 'status-good';
                    const color = daysLeft < 10 ? '#f5576c' : '#34c759';
                   
                    garage.innerHTML += `
                        <div class="cabinet-card">
                            <button class="btn btn-secondary" style="position: absolute; top: 10px; right: 10px; padding: 5px 10px; font-size: 12px;" onclick="deleteCar('${id}')">O'chirish</button>
                            <h4>${car.model} (${car.year}-yil)</h4>
                            <p>Oxirgi moy: ${car.lastOil} km</p>
                            <p>Servis: <b>${car.lastOil + 7000} km</b></p>
                            <p>Kunlik yurish: ${car.daily} km</p>
                            <p style="color: ${color};">~ ${daysLeft} kun qoldi</p>
                        </div>
                    `;
                });
            });
        }
       
        // Delete car
        window.deleteCar = async (id) => {
            if (confirm("O'chirmoqchimisiz?")) {
                await deleteDoc(doc(db, "cars", id));
                await sendTelegramMessage(`Mashina o'chirildi: ID ${id}`);
            }
        };
       
        // Toggle chat
        function toggleChat() {
            const chatBox = document.getElementById('chatBox');
            chatBox.style.display = chatBox.style.display === 'flex' ? 'none' : 'flex';
        }
       
        // Send message (simulate bot, but send to Telegram group)
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
           
            const messages = document.getElementById('chatMessages');
           
            // User message
            const userMsg = document.createElement('p');
            userMsg.className = 'user-message';
            userMsg.style.cssText = 'background: #f5f5f7; padding: 10px; border-radius: 10px; margin: 5px 0; text-align: right;';
            userMsg.textContent = message;
            messages.appendChild(userMsg);
           
            // Send to Telegram
            await sendTelegramMessage(`Foydalanuvchi xabari: ${message}`);
           
            // Simulate bot response
            setTimeout(() => {
                const botMsg = document.createElement('p');
                botMsg.className = 'bot-message';
                botMsg.style.cssText = 'background: #e5e5ea; padding: 10px; border-radius: 10px; margin: 5px 0;';
                botMsg.textContent = 'Xabaringiz qabul qilindi. Tez orada javob beramiz!';
                messages.appendChild(botMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
           
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
        }
       
        // Scroll to section
        function scrollToSection(section) {
            document.querySelector(section).scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
